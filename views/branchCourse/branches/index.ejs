<% layout("/layouts/boilerplate.ejs") %>

<div class="container my-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="text-primary">Branches</h1>
        <div class="d-flex justify-content-between gap-2">
            <a href="/branches/new" class="btn btn-success">Add New Branch</a>
            <a href="/" class="btn btn-warning">Back</a>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
            <thead class="table-dark">
                <tr>
                    <th scope="col">Branch Name</th>
                    <th scope="col">Branch Code</th>
                    <th scope="col">Course</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                <% branches.forEach(branch=> { %>
                <tr>
                    <td><%= branch.branchName %></td>
                    <td><%= branch.branchCode %></td>
                    <td><%= branch.course?.courseName || 'Na' %></td>
                    <td>
                        <a
                            href="/branches/<%= branch._id %>/edit"
                            class="btn btn-primary btn-sm me-2"
                            >Edit</a
                        >
                        <form
                            action="/branches/<%= branch._id %>/delete"
                            method="POST"
                            class="d-inline"
                        >
                            <button type="submit" class="btn btn-danger btn-sm">
                                Delete
                            </button>
                        </form>
                    </td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</div>
